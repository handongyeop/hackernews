{"version":3,"sources":["app.ts"],"names":[],"mappings":"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","file":"app.c61986b1.js","sourceRoot":"..","sourcesContent":["type Store = {\r\n  currentPage: number;\r\n  feeds: NewsFeed[];\r\n};\r\n\r\ntype News = {\r\n  id: number;\r\n  time_ago: string;\r\n  title: string;\r\n  url: string;\r\n  user: string;\r\n  content: string;\r\n};\r\n\r\ntype NewsFeed = News & {\r\n  comments_count: number;\r\n  points: number;\r\n  read?: boolean;\r\n};\r\n\r\ntype NewsDetail = News & {\r\n  comments: NewsComment[];\r\n};\r\n\r\ntype NewsComment = News & {\r\n  comments: NewsComment[];\r\n  level: number;\r\n};\r\n\r\nconst container: HTMLElement | null = document.getElementById(\"root\");\r\nconst ajax: XMLHttpRequest = new XMLHttpRequest();\r\nconst content = document.createElement(\"div\");\r\nconst NEWS_URL = \"https://api.hnpwa.com/v0/news/1.json\";\r\nconst CONTENT_URL = \"https://api.hnpwa.com/v0/item/@id.json\";\r\nconst store: Store = {\r\n  currentPage: 1,\r\n  feeds: [],\r\n};\r\n\r\nfunction getData<AjaxResponse>(url: string): AjaxResponse {\r\n  ajax.open(\"GET\", url, false);\r\n  ajax.send();\r\n\r\n  return JSON.parse(ajax.response);\r\n}\r\n\r\nfunction makeFeeds(feeds: NewsFeed[]): NewsFeed[] {\r\n  for (let i = 0; i < feeds.length; i++) {\r\n    feeds[i].read = false;\r\n  }\r\n\r\n  return feeds;\r\n}\r\n\r\nfunction updateView(html: string): void {\r\n  if (container) {\r\n    container.innerHTML = html;\r\n  } else {\r\n    console.error(\"최상위 컨테이너가 없어 UI를 진행하지 못합니다.\");\r\n  }\r\n}\r\n\r\nfunction newsFeed() {\r\n  let newsFeed: NewsFeed[] = store.feeds;\r\n  const newsList = [];\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen\">\r\n      <div class=\"bg-white text-xl\">\r\n        <div class=\"mx-auto px-4\">\r\n          <div class=\"flex justify-between items-center py-6\">\r\n            <div class=\"flex justify-start\">\r\n              <h1 class=\"font-extrabold\">Hacker News</h1>    \r\n            </div>\r\n            <div class=\"items-center justify-end\">\r\n              <a href='#/page/{{__prev_page__}}' class=\"text-gray-500\">\r\n                Previous\r\n              </a>\r\n              <a href='#/page/{{__next_page__}}' class=\"text-gray-500 ml-4\">\r\n                Next\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"p-4 text-2xl text-gray-700\">\r\n        {{__news_feed__}}\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  if (newsFeed.length === 0) {\r\n    newsFeed = store.feeds = makeFeeds(getData<NewsFeed[]>(NEWS_URL));\r\n  }\r\n\r\n  for (let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++) {\r\n    newsList.push(`\r\n      <div class=\"p-6 ${\r\n        newsFeed[i].read ? \"bg-red-500\" : \"bg-white\"\r\n      } mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\r\n        <div class=\"flex\">\r\n          <div class=\"flex-auto\">\r\n            <a href=\"#/show/${newsFeed[i].id}\">${newsFeed[i].title}</a>  \r\n          </div>\r\n          <div class=\"text-center text-sm\">\r\n            <div class=\"w-10 text-white bg-green-300 rounded-lg px-0 py-2\">${\r\n              newsFeed[i].comments_count\r\n            }</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex mt-3\">\r\n          <div class=\"grid grid-cols-3 text-sm text-gray-500\">\r\n            <div><i class=\"fas fa-user mr-1\"></i>${newsFeed[i].user}</div>\r\n            <div><i class=\"fas fa-heart mr-1\"></i>${newsFeed[i].points}</div>\r\n            <div><i class=\"far fa-clock mr-1\"></i>${newsFeed[i].time_ago}</div>\r\n          </div>  \r\n        </div>\r\n      </div>    \r\n    `);\r\n  }\r\n\r\n  template = template.replace(\"{{__news_feed__}}\", newsList.join(\"\"));\r\n  template = template.replace(\r\n    \"{{__prev_page__}}\",\r\n    String(store.currentPage > 1 ? store.currentPage - 1 : 1)\r\n  );\r\n  template = template.replace(\r\n    \"{{__next_page__}}\",\r\n    String(\r\n      newsFeed.length / (store.currentPage * 10) > 1\r\n        ? store.currentPage + 1\r\n        : store.currentPage\r\n    )\r\n  );\r\n\r\n  updateView(template);\r\n}\r\n\r\nconst ul = document.createElement(\"ul\");\r\n\r\nfunction newsDetail(): void {\r\n  const id = location.hash.substring(7);\r\n  const newsContent = getData<NewsDetail>(CONTENT_URL.replace(\"@id\", id));\r\n  let template = `\r\n    <div class=\"bg-gray-600 min-h-screen pb-8\">\r\n      <div class=\"bg-white text-xl\">\r\n        <div class=\"mx-auto px-4\">\r\n          <div class=\"flex justify-between items-center py-6\">\r\n            <div class=\"flex justify-start\">\r\n              <h1 class=\"font-extrabold\">Hacker News</h1>    \r\n            </div>\r\n            <div class=\"items-center justify-end\">\r\n              <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\r\n                <i class=\"fa fa-times\"></i>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"h-full border rounded-xl bg-white m-6 p-4\">\r\n        <h2>${newsContent.title}</h2>\r\n        <div class=\"text-gray-400 h-20\">\r\n          ${newsContent.content}\r\n        </div>\r\n\r\n        {{__comments__}}\r\n\r\n      </div>  \r\n    </div>\r\n  `;\r\n\r\n  for (let i = 0; i < store.feeds.length; i++) {\r\n    if (store.feeds[i].id === Number(id)) {\r\n      store.feeds[i].read = true;\r\n    }\r\n  }\r\n\r\n  updateView(\r\n    template.replace(\"{{__comments__}}\", makeComment(newsContent.comments))\r\n  );\r\n}\r\n\r\nfunction makeComment(comments: NewsComment[]): string {\r\n  const commentString = [];\r\n\r\n  for (let i = 0; i < comments.length; i++) {\r\n    const comment: NewsComment = comments[i];\r\n    commentString.push(`\r\n      <div class=\"pl-${comment.level * 20} mt-4\">\r\n        <div class=\"text-gray-400\">\r\n          <i class=\"fa fa-sort-up mr-2\"></i>\r\n          <strong>${comment.user}</strong> ${comment.time_ago}\r\n        </div>\r\n        <p class=\"text-gray-700\">${comment.content}</p>\r\n      </div>\r\n    `);\r\n\r\n    if (comment.comments.length > 0) {\r\n      commentString.push(makeComment(comment.comments));\r\n    }\r\n  }\r\n\r\n  return commentString.join(\"\");\r\n}\r\n\r\nfunction router(): void {\r\n  const routePath = location.hash;\r\n\r\n  if (routePath === \"\") {\r\n    newsFeed();\r\n  } else if (routePath.indexOf(\"#/page/\") >= 0) {\r\n    store.currentPage = Number(routePath.substring(7));\r\n    newsFeed();\r\n  } else {\r\n    newsDetail();\r\n  }\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", router);\r\n\r\nrouter();\r\n"]}